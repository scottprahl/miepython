"use strict";(self.webpackChunk_JUPYTERLAB_CORE_OUTPUT=self.webpackChunk_JUPYTERLAB_CORE_OUTPUT||[]).push([[1711],{21711:(e,t,a)=>{a.r(t),a.d(t,{default:()=>W});var n=a(25949),o=a(6803),r=a(24474),i=a(78099),l=a(95579),s=a(29290),c=a(23024),d=a(19838),p=a(51680),m=a(38202),u=a(52104),g=a(35844),h=a(20379),b=a(61279),C=a(6029),y=a(79688),_=a(56114),f=a(60920),w=a(77626),v=a.n(w);class k extends o.ReactWidget{constructor(e){super(),this._translator=e.translator,this._availability=e.availability||{canClearSettings:!0,canClearContents:!0},this._settingsChecked=this._availability.canClearSettings,this._contentsChecked=this._availability.canClearContents,this.addClass("jp-ClearData-dialog")}getValue(){return{clearSettings:this._settingsChecked&&this._availability.canClearSettings,clearContents:this._contentsChecked&&this._availability.canClearContents}}render(){return v().createElement(j,{translator:this._translator,settingsChecked:this._settingsChecked,contentsChecked:this._contentsChecked,availability:this._availability,setSettingsChecked:e=>{this._settingsChecked=e,this.update()},setContentsChecked:e=>{this._contentsChecked=e,this.update()}})}}function j(e){const{translator:t,settingsChecked:a,contentsChecked:n,availability:o,setSettingsChecked:r,setContentsChecked:i}=e,l=t.load("@jupyterlite");return v().createElement("div",{className:"jp-ClearData-container"},v().createElement("div",{className:"jp-ClearData-warning-box"},v().createElement("div",{className:"jp-ClearData-warning-icon"},"⚠️"),v().createElement("div",{className:"jp-ClearData-warning-text"},v().createElement("span",{className:"jp-ClearData-warning-title"},l.__("Warning: Data Loss Risk")),v().createElement("p",null,l.__("Clearing browser data will permanently remove data stored in your browser. This operation cannot be undone and may result in loss of:")),v().createElement("ul",null,v().createElement("li",null,l.__("User settings and preferences")),v().createElement("li",null,l.__("Notebooks and files stored in the browser")),v().createElement("li",null,l.__("Unsaved work and changes"))))),v().createElement("div",{className:"jp-ClearData-option "+(o.canClearSettings?"":"jp-mod-disabled")},v().createElement("input",{id:"jp-ClearData-settings",type:"checkbox",checked:a,onChange:e=>r(e.target.checked),disabled:!o.canClearSettings}),v().createElement("label",{htmlFor:"jp-ClearData-settings",className:o.canClearSettings?"":"jp-mod-disabled"},l.__("Settings and preferences"),!o.canClearSettings&&v().createElement("span",{className:"jp-ClearData-unavailable"}," ",l.__("(unavailable)")))),v().createElement("div",{className:"jp-ClearData-option "+(o.canClearContents?"":"jp-mod-disabled")},v().createElement("input",{id:"jp-ClearData-contents",type:"checkbox",checked:n,onChange:e=>i(e.target.checked),disabled:!o.canClearContents}),v().createElement("label",{htmlFor:"jp-ClearData-contents",className:o.canClearContents?"":"jp-mod-disabled"},l.__("Files and notebooks"),!o.canClearContents&&v().createElement("span",{className:"jp-ClearData-unavailable"}," ",l.__("(unavailable)")))),v().createElement("div",{className:"jp-ClearData-reload-notice"},l.__("This will reload the page after clearing the selected data.")))}const D=new RegExp("/(lab|tree|notebooks|edit|consoles)\\/?");var S;!function(e){e.about="application:about",e.docmanagerDownload="docmanager:download",e.filebrowserDownload="filebrowser:download",e.copyShareableLink="filebrowser:share-main",e.clearBrowserData="application:clear-browser-data"}(S||(S={}));const x="jupyterlite",E={id:"@jupyterlite/application-extension:about",autoStart:!0,requires:[m.ITranslator],optional:[o.ICommandPalette,c.IMainMenu],activate:(e,t,a,n)=>{const{commands:r}=e,i=t.load(x),l=i.__("Help");r.addCommand(S.about,{label:i.__("About %1",e.name),execute:()=>{const t=i.__("Version %1",e.version),a=v().createElement("span",{className:"jp-About-version-info"},v().createElement("span",{className:"jp-About-version"},t)),n=v().createElement("span",{className:"jp-About-header"},v().createElement("div",{className:"jp-About-header-info"},v().createElement(b.liteWordmark.react,{height:"auto",width:"196px"}),a)),r=v().createElement("span",{className:"jp-About-externalLinks"},v().createElement("a",{href:"https://github.com/jupyterlite/jupyterlite/graphs/contributors",target:"_blank",rel:"noopener noreferrer",className:"jp-Button-flat"},i.__("CONTRIBUTOR LIST")),v().createElement("a",{href:"https://github.com/jupyterlite/jupyterlite",target:"_blank",rel:"noopener noreferrer",className:"jp-Button-flat"},i.__("JUPYTERLITE ON GITHUB"))),l=v().createElement("span",{className:"jp-About-copyright"},i.__("© 2021-, JupyterLite Contributors")),s=v().createElement("div",{className:"jp-About-body"},r,l);return(0,o.showDialog)({title:n,body:s,buttons:[o.Dialog.createButton({label:i.__("Dismiss"),className:"jp-About-button jp-mod-reject jp-mod-styled"})]})}}),a&&a.addItem({command:S.about,category:l}),n&&n.helpMenu.addGroup([{command:S.about}],0)}},I={id:"@jupyterlite/application-extension:download",autoStart:!0,requires:[m.ITranslator,i.IDocumentManager],optional:[o.ICommandPalette,l.IFileBrowserFactory],activate:(e,t,a,n,r)=>{const i=t.load(x),{commands:l,serviceManager:s,shell:c}=e,{contents:d}=s,p=()=>{const{currentWidget:e}=c;return!(!e||!a.contextForWidget(e))},m=async(e,t)=>{var a,n,o;const r=await d.get(e,{content:!0}),i=document.createElement("a");if("notebook"===r.type||"json"===r.format||"text/json"===r.mimetype){const e=null!==(a=r.mimetype)&&void 0!==a?a:"text/json",t=JSON.stringify(r.content,null,2);i.href=`data:${e};charset=utf-8,${encodeURIComponent(t)}`}else if("text"===r.format||"text/plain"===r.mimetype){const e=null!==(n=r.mimetype)&&void 0!==n?n:"text/plain";i.href=`data:${e};charset=utf-8,${encodeURIComponent(r.content)}`}else{if("base64"!==r.format&&"application/octet-stream"!==r.mimetype)throw new Error(`Content whose mimetype is "${r.mimetype}" cannot be downloaded`);{const e=null!==(o=r.mimetype)&&void 0!==o?o:"application/octet-stream";i.href=`data:${e};base64,${r.content}`}}i.download=t,document.body.appendChild(i),i.click(),document.body.removeChild(i)};l.addCommand(S.docmanagerDownload,{label:i.__("Download"),caption:i.__("Download the file to your computer"),isEnabled:p,execute:async()=>{const e=c.currentWidget;if(!p()||!e)return;const t=a.contextForWidget(e);if(!t)return(0,o.showDialog)({title:i.__("Cannot Download"),body:i.__("No context found for current widget!"),buttons:[o.Dialog.okButton({label:i.__("OK")})]});await t.save();try{await m(t.path,t.path)}catch(e){return(0,o.showDialog)({title:i.__("Cannot Download"),body:JSON.stringify(e),buttons:[o.Dialog.okButton({label:i.__("OK")})]})}}});const g=i.__("File Operations");if(n&&n.addItem({command:S.docmanagerDownload,category:g}),r){const{tracker:e}=r;l.addCommand(S.filebrowserDownload,{execute:async()=>{const t=e.currentWidget;t&&Array.from(t.selectedItems()).forEach((async e=>{if("directory"!==e.type)try{await m(e.path,e.name)}catch(e){return(0,o.showDialog)({title:i.__("Cannot Download"),body:JSON.stringify(e),buttons:[o.Dialog.okButton({label:i.__("OK")})]})}}))},icon:u.downloadIcon.bindprops({stylesheet:"menuItem"}),label:i.__("Download")})}}},N={id:"@jupyterlite/application-extension:logo",optional:[n.ILabShell],autoStart:!0,activate:(e,t)=>{if(!t)return;const a=new f.Widget;b.liteIcon.element({container:a.node,elementPosition:"center",margin:"2px 2px 2px 8px",height:"auto",width:"16px"}),a.id="jp-MainLogo",t.add(a,"top",{rank:0})}},B={id:"@jupyterlite/application-extension:lsp-connection-manager",autoStart:!0,requires:[s.IWidgetLSPAdapterTracker],provides:s.ILSPDocumentConnectionManager,activate:(e,t)=>{const a=new class extends s.LanguageServerManager{async fetchSessions(){}}({settings:e.serviceManager.serverSettings});return new s.DocumentConnectionManager({languageServerManager:a,adapterTracker:t})}},P={id:"@jupyterlite/application-extension:notify-commands",autoStart:!0,optional:[n.ILabShell],activate:(e,t)=>{t&&t.layoutModified.connect((()=>{e.commands.notifyCommandChanged()}))}},R={id:"@jupyterlite/application-extension:opener",autoStart:!0,requires:[n.IRouter,i.IDocumentManager],optional:[n.ILabShell,p.ISettingRegistry],activate:(e,t,a,n,o)=>{const{commands:i,docRegistry:l}=e,s="router:tree";i.addCommand(s,{execute:s=>{var c;const d=s,{request:p,search:m}=d;if(null!==(c=p.match(D))&&void 0!==c&&!c)return;const u=new URLSearchParams(m),g=u.getAll("path");if(0===g.length)return;const h=g.map((e=>decodeURIComponent(e)));e.started.then((async()=>{var e;const s=r.PageConfig.getOption("notebookPage"),[c]=h;if("tree"===s){let e="/edit";"Notebook"===l.defaultWidgetFactory(c).name&&(e="/notebooks");const t=r.PageConfig.getBaseUrl(),a=new URL(r.URLExt.join(t,e,"index.html"));return a.searchParams.append("path",c),void(window.location.href=a.toString())}if("consoles"!==s)if("notebooks"===s||"edit"===s){let t=l.defaultWidgetFactory(c).name;if(o){const e=(await o.load("@jupyterlab/docmanager-extension:plugin")).get("defaultViewers").composite;l.getFileTypesForPath(c).forEach((a=>{void 0!==e[a.name]&&l.getWidgetFactory(e[a.name])&&(t=e[a.name])}))}const n=null!==(e=u.get("factory"))&&void 0!==e?e:t;a.open(c,n,void 0,{ref:"_noref"})}else{h.forEach((e=>a.open(e)));const e=new URL(r.URLExt.join(r.PageConfig.getBaseUrl(),p));e.searchParams.delete("path");const{pathname:o,search:l}=e;if(t.navigate(`${o}${l}`,{skipRouting:!0}),n){const e=()=>{i.execute("docmanager:show-in-file-browser"),n.currentChanged.disconnect(e)};n.currentChanged.connect(e)}}else i.execute("console:create",{path:c})}))}}),t.register({command:s,pattern:D})}},U={id:"@jupyterlite/application-extension:service-worker-manager",autoStart:!0,provides:h.IServiceWorkerManager,optional:[g.IKernelClient],activate:(e,t)=>{const{contents:a}=e.serviceManager,n=new h.ServiceWorkerManager({contents:a});return void 0!==t&&n.registerStdinHandler("kernel",t.handleStdin.bind(t)),n}},L={id:"@jupyterlite/application-extension:session-context-patch",autoStart:!0,requires:[i.IDocumentManager,i.IDocumentWidgetOpener],activate:(e,t,a)=>{const n=e.serviceManager.contents;a.opened.connect(((e,a)=>{var o;const r=t.contextForWidget(a);if(""===n.driveName(null!==(o=null==r?void 0:r.path)&&void 0!==o?o:""))return;const i=a.context.sessionContext;i._name=null==r?void 0:r.path,i._path=null==r?void 0:r.path}))}},T={id:"@jupyterlite/application-extension:share-file",requires:[l.IFileBrowserFactory,m.ITranslator],autoStart:!0,activate:(e,t,a)=>{const n=a.load(x),{commands:i,docRegistry:l}=e,{tracker:s}=t;i.addCommand(S.copyShareableLink,{execute:()=>{const e=s.currentWidget;if(!e)return;const t=r.PageConfig.getBaseUrl();let a=r.PageConfig.getOption("appUrl");const n=Array.from((0,_.filter)(e.selectedItems(),(e=>"directory"!==e.type)));if(!n.length)return;if("/tree"===a){const[e]=n;a="Notebook"===l.defaultWidgetFactory(e.path).name?"/notebooks":"/edit"}const i=new URL(r.URLExt.join(t,a,"index.html"));n.forEach((e=>{i.searchParams.append("path",e.path)})),o.Clipboard.copyToSystem(i.href)},isVisible:()=>!!s.currentWidget&&Array.from(s.currentWidget.selectedItems()).length>=1,icon:u.linkIcon.bindprops({stylesheet:"menuItem"}),label:n.__("Copy Shareable Link")})}},W=[E,{id:"@jupyterlite/application-extension:clear-browser-data",autoStart:!0,requires:[m.ITranslator],optional:[o.ICommandPalette,d.ISettingManager,d.IDefaultDrive,l.IDefaultFileBrowser],activate:(e,t,a,n,r,i)=>{const{commands:l}=e,s=t.load(x),c=s.__("Help"),d=r instanceof C.BrowserStorageDrive,p=n instanceof y.Settings;(d||p)&&(d&&i&&i.addClass("jp-BrowserStorageDrive"),l.addCommand(S.clearBrowserData,{label:s.__("Clear Browser Data"),icon:e=>e.isPalette?void 0:u.clearIcon,execute:async()=>{const e=new k({translator:t,availability:{canClearSettings:p&&!!n,canClearContents:d&&!!r}});return(await(0,o.showDialog)({title:s.__("Clear Browser Data"),body:e,buttons:[o.Dialog.cancelButton({label:s.__("Cancel")}),o.Dialog.warnButton({label:s.__("Clear")})]})).button.accept?(async e=>{const{clearSettings:t,clearContents:a}=e,o=[];if(a&&d){const e=r;o.push(e.clearStorage())}if(t&&p){const e=n;o.push(e.clear())}await Promise.all(o),window.location.reload()})(e.getValue()):await Promise.resolve()}}),a&&a.addItem({command:S.clearBrowserData,category:c}))}},I,N,B,P,R,U,L,T]}}]);
//# sourceMappingURL=1711.2c1c274.js.map